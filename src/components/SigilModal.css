/* ────────────────────────────────────────────────────────────────
   SigilModal.css · Atlantean Lumitech “Kairos Sigil Viewer”
   Mobile-Max • zero-jank • same visuals, faster on phones
───────────────────────────────────────────────────────────────── */

/* Runtime-friendly fallbacks (your JS may override if desired) */
:root{
  --tap: 44px;                  /* accessible tap target */
  --gap: 12px;
  --dvh: 100dvh;                /* dynamic viewport height */
  --svh: 100svh;                /* spec future */
  --vh:  100vh;                 /* legacy fallback */
}

/* ╔═ GLOBAL PAGE-FREEZE WHEN OVERLAY IS PRESENT ═════════════════ */
html:has(.sigil-modal-overlay),
body:has(.sigil-modal-overlay){
  overflow: hidden !important;
  overscroll-behavior: none;
  touch-action: none;
}

/* ╔═ IMMERSIVE BACKDROP ════════════════════════════════════════ */
.sigil-modal-overlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: auto;

  display: flex;
  justify-content: center;
  align-items: center;

  /* dynamic height ensures no iOS toolbar jump */
  min-width: 100vw;
  min-height: var(--dvh, 100dvh);

  padding:
    max(12px, env(safe-area-inset-top))
    max(12px, env(safe-area-inset-right))
    max(12px, env(safe-area-inset-bottom))
    max(12px, env(safe-area-inset-left));

  --swirl: radial-gradient(1200px 800px at 50% 25%,
            rgba(0,255,235,.07) 0%,
            rgba(0,200,255,.05) 28%,
            transparent        60%) no-repeat;

  backdrop-filter: blur(22px) saturate(190%);
  background:
    var(--swirl),
    repeating-radial-gradient(circle at 50% 40%,
      rgba(0,255,230,.03) 0 2px,
      rgba(0,255,230,0) 2px 6px),
    #03070b;

  animation:
    fadeIn .6s ease-out both,
    swirlShift 20s linear infinite;

  overscroll-behavior: contain;
  /* allow inner scrolling on iOS */
  touch-action: manipulation;

  /* Perf: avoid layout bleed & enable early paint skip */
  content-visibility: auto;
  contain: layout paint style;
  will-change: background-position;
}

@keyframes fadeIn{ from{opacity:0} to{opacity:1} }
@keyframes swirlShift{
  0%  { background-position: 50% 25%, center }
  50% { background-position: 50% 30%, center }
  100%{ background-position: 50% 25%, center }
}

/* Mobile: soften heavy filters slightly to save GPU time */
@media (max-width: 480px){
  .sigil-modal-overlay{ backdrop-filter: blur(14px) saturate(150%) }
}

/* ╔═ MODAL CARD ═════════════════════════════════════════════════ */
.sigil-modal{
  pointer-events: auto;
  position: relative;

  width: clamp(330px, 96vw, 600px);
  max-height: calc(var(--dvh, 100dvh) - max(28px, env(safe-area-inset-top) + env(safe-area-inset-bottom)));
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scrollbar-gutter: stable both-edges; /* no layout jump when scrollbars appear */

  padding:
    calc(36px + env(safe-area-inset-top)) 32px
    calc(48px + env(safe-area-inset-bottom));

  border-radius: 22px;
  background: linear-gradient(145deg, #10171e 0%, #05080c 100%);
  border: 1px solid rgba(0,255,235,.15);
  box-shadow:
    0 12px 48px rgba(0,255,230,.28),
    inset 0 0 12px rgba(0,255,230,.18);
  color: #d9ffff;
  text-align: center;
  animation: cardPop .5s cubic-bezier(.24,1.35,.45,1.05) both;

  /* Perf: skip off-screen work & give UA a stable size hint */
  content-visibility: auto;
  contain: content;
  contain-intrinsic-size: 1px 720px;
  touch-action: manipulation;
}

@keyframes cardPop{
  0%  { opacity: 0; transform: translateY(42px) scale(.88) rotateX(7deg) }
  70% { transform: translateY(-8px) scale(1.04) }
  100%{ opacity: 1; transform: none }
}

/* custom scrollbar (non-intrusive) */
.sigil-modal::-webkit-scrollbar{ width: 10px }
.sigil-modal::-webkit-scrollbar-thumb{
  background: #00ffe04f; border-radius: 8px;
}
.sigil-modal::-webkit-scrollbar-thumb:hover{ background:#00ffe08d }

/* ╔═ HOLOGRAPHIC CLOSE BUTTON — Ω-Pulse 2.2 ═════════════════════ */
.sigil-modal .close-btn{
  --pulse-dur: 5236ms;
  --pulse-offset: 0ms;

  position: absolute;
  top: 18px; right: 20px;
  width: 48px; height: 48px;
  display: grid; place-items: center;
  background: transparent; border: none; padding: 0;
  cursor: pointer; border-radius: 50%; isolation: isolate;

  box-shadow: 0 0 12px #00ffe055, inset 0 0 8px #00ffe033;
  color: #9bd;

  /* keep transitions cheap & responsive */
  transition:
    transform .28s cubic-bezier(.23,1.6,.45,1.15),
    box-shadow .22s,
    color .2s;
  will-change: transform;
  transform: translateZ(0);
}
.sigil-modal .close-btn svg{
  width: 62%; height: 62%;
  transition: transform .6s cubic-bezier(.19,1,.22,1);
  will-change: transform;
}
.sigil-modal .close-btn::before{
  content:""; position:absolute; inset:6px; border-radius:50%;
  background: conic-gradient(from 0deg, transparent 0 55deg, rgba(0,255,240,.92) 75deg 95deg, transparent 120deg 360deg);
  filter: blur(1.2px) drop-shadow(0 0 6px #00ffe0aa);
  animation: coreSpin 3.8s linear infinite;
  will-change: transform;
}
@keyframes coreSpin{ to{ transform: rotate(360deg) } }
.sigil-modal .close-btn::after{
  content:""; position:absolute; inset:-10px; border-radius:50%;
  background: radial-gradient(circle, rgba(0,255,240,.35) 0 18%, transparent 60%);
  animation: pulseWave var(--pulse-dur) ease-out infinite var(--pulse-offset);
  will-change: transform, opacity;
}
@keyframes pulseWave{
  0%{ transform: scale(.22); opacity:.9 }
  60%{ transform: scale(1.9); opacity:0 }
  100%{ transform: scale(1.9); opacity:0 }
}
.sigil-modal .close-btn:hover,
.sigil-modal .close-btn:focus-visible{
  transform: scale(1.12) rotateX(12deg) rotateY(-12deg);
  box-shadow: 0 0 22px #00ffe0e0, inset 0 0 14px #00ffe080;
  color:#fff; outline:none;
}
.sigil-modal .close-btn:hover svg,
.sigil-modal .close-btn:focus-visible svg{ transform: rotate(-220deg) scale(1.06) }

@media (prefers-reduced-motion: reduce){
  .sigil-modal .close-btn,
  .sigil-modal .close-btn::before,
  .sigil-modal .close-btn::after,
  .sigil-modal .close-btn svg{
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}
/* =============== Kairos “breath” scope =============== */
.sigil-scope {
  /* shared vars for title + input */
  --pulse: 5.236s;                    /* golden-breath period */
  --core: var(--aqua-core, #8beaff);  /* inherits your system hue if present */
  --core-2: #ff1559;
  --ink: rgba(255,255,255,.92);
  --glass: rgba(255,255,255,.06);
  --stroke: rgba(139,234,255,.38);
  --stroke-soft: rgba(139,234,255,.18);
  --shadow: rgba(0,0,0,.40);
}

/* layout for the input row only */
.sigil-row {
  display: flex;
  align-items: center;
  gap: .75rem;
}

/* =============== Title: subtle, remarkable =============== */
.sigil-title {
  position: relative;
  margin: 0 0 .5rem 0;
  font-weight: 650;
  letter-spacing: .02em;
  line-height: 1.15;

  /* gradient text */
  color: transparent;
  background: linear-gradient(90deg, var(--core), #c7f4ff 25%, var(--core) 75%, var(--core-2));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent; /* Safari */

  filter: drop-shadow(0 2px 12px rgba(139,234,255,.14));
  animation: sigilTitleBreath var(--pulse) ease-in-out infinite;
}

/* faint aura behind the text */
.sigil-title::after {
  content: "";
  position: absolute; inset: -6px -10px -8px;
  pointer-events: none;
  border-radius: 18px;
  background:
    radial-gradient(60% 40% at 50% 60%, rgba(139,234,255,.10) 0%, transparent 70%),
    radial-gradient(30% 20% at 70% 30%, rgba(255,21,89,.08) 0%, transparent 70%);
  animation: sigilAuraBreath var(--pulse) ease-in-out infinite;
}

/* =============== Label =============== */
.sigil-label {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  font-size: .95rem;
  color: var(--ink);
  user-select: none;
}

.sigil-label__text { opacity: .85; }

/* =============== Input: glass, gradient ring, breath =============== */
.sigil-input {
  appearance: none;
  -webkit-appearance: none;
  font: inherit;
  color: var(--ink);
  min-width: 18ch;
  padding: .65rem .8rem;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02)) padding-box,
    linear-gradient(90deg, var(--stroke), rgba(255,255,255,.2), var(--stroke)) border-box;
  box-shadow:
    0 6px 16px -6px var(--shadow),
    inset 0 0 0 1px rgba(255,255,255,.02);
  outline: none;
  transition: box-shadow .28s ease, border-color .28s ease, background-position .28s ease;
  background-size: 200% 100%; /* for gentle shimmer */
  animation: sigilInputBreath var(--pulse) ease-in-out infinite;
  caret-color: var(--core);
}

.sigil-input:focus {
  border-color: var(--core);
  box-shadow:
    0 10px 28px -10px rgba(0,0,0,.55),
    0 0 0 2px var(--stroke-soft),
    0 0 24px 2px rgba(139,234,255,.18),
    inset 0 0 0 1px rgba(255,255,255,.05);
}

.sigil-input::-webkit-calendar-picker-indicator {
  filter: drop-shadow(0 0 4px rgba(139,234,255,.35)) saturate(1.1);
  opacity: .9;
}
.sigil-input::placeholder { color: rgba(255,255,255,.55); }

/* =============== Keyframes (5.236s breath) =============== */
@keyframes sigilTitleBreath {
  0%   { filter: drop-shadow(0 2px 10px rgba(139,234,255,.10)); transform: translateZ(0) scale(1); }
  50%  { filter: drop-shadow(0 3px 16px rgba(139,234,255,.22)); transform: translateZ(0) scale(1.006); }
  100% { filter: drop-shadow(0 2px 10px rgba(139,234,255,.10)); transform: translateZ(0) scale(1); }
}
@keyframes sigilAuraBreath {
  0%   { opacity: .55; transform: scale(1); }
  50%  { opacity: .85; transform: scale(1.02); }
  100% { opacity: .55; transform: scale(1); }
}
@keyframes sigilInputBreath {
  0%   { box-shadow:
           0 6px 16px -6px rgba(0,0,0,.40),
           inset 0 0 0 1px rgba(255,255,255,.02);
         background-position: 0% 0%; }
  50%  { box-shadow:
           0 8px 20px -8px rgba(0,0,0,.55),
           0 0 0 1px rgba(139,234,255,.12),
           0 0 22px 1px rgba(139,234,255,.10) inset;
         background-position: 100% 0%; }
  100% { box-shadow:
           0 6px 16px -6px rgba(0,0,0,.40),
           inset 0 0 0 1px rgba(255,255,255,.02);
         background-position: 0% 0%; }
}

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .sigil-title,
  .sigil-title::after,
  .sigil-input { animation: none !important; }
}


/* ╔═ INPUT ROW & “NOW” BUTTON ═══════════════════════════════════ */
.input-row{
  display:flex; flex-wrap:wrap; gap: var(--gap);
  justify-content:center; align-items:center;
  margin-bottom: 20px;
}
.input-row input[type="datetime-local"]{
  appearance:none;
  background:#0d1118; color:#d8feff;
  border:1px solid #00ffe059;
  padding: 10px 14px;
  border-radius: 9px;
  font: inherit; font-size: .95rem;
  min-height: var(--tap);             /* mobile tap size */
  transition: border-color .18s, box-shadow .18s, transform .12s;
  touch-action: manipulation;
}
.input-row input[type="datetime-local"]:focus-visible{
  border-color:#00ffe0;
  box-shadow:0 0 0 2px #00ffe030;
  outline:none;
}
.now-btn{
  background:#00ffe0; color:#031019;
  font-weight:650; border:none;
  padding: 10px 18px;
  border-radius:9px; cursor:pointer;
  min-height: var(--tap);
  box-shadow:0 0 16px #00ffe088;
  transition: transform .16s, box-shadow .16s, filter .16s;
  touch-action: manipulation;
}
.now-btn:hover,
.now-btn:focus-visible{
  transform: translateY(-2px) scale(1.04);
  box-shadow:0 0 22px #00ffe0cc;
  outline:none;
}

/* ╔═ STATUS TEXTS ═══════════════════════════════════════════════ */
.countdown{ margin:0 0 10px; color:#8cfaff; font-size:.9rem; text-align:center }
.error-msg{ margin:0 0 10px; color:#ff8c8c; font-size:.9rem; text-align:center }

/* ╔═ SIGIL CANVAS ═══════════════════════════════════════════════ */
#sigil-export{
  background:#060a10; border-radius:18px;
  box-shadow: inset 0 0 12px #00ffe040, 0 0 24px #00ffe030;
  /* micro-opt: keep to its own layer on mobile when animating */
  contain: paint;
}
.pulse-tag{
  position:absolute; bottom:12px; right:16px;
  font: 700 1.05rem/1 "JetBrains Mono", monospace;
  color:#fffdfdcc; text-shadow: 0 0 6px #00ffe0ee;
}/* ╔═ METADATA BLOCK & COPY BUTTONS — Atlantean Frost ═════════════════════ */

:root{
  /* fallbacks if Seal tokens aren't present */
  --seal-text: #e8fbf8;
  --seal-text-dim: #aee8df;
  --seal-accent: #37ffe4;
  --seal-accent-2: #a78bfa;
  --seal-accent-3: #5ce1ff;
  --seal-border: rgba(60,220,205,.35);
  --seal-border-strong: rgba(55,255,228,.55);
  --ring-shadow: 0 0 0 2px rgba(55,255,228,.25), 0 0 0 6px rgba(55,255,228,.12);
  --focus: 0 0 0 2px rgba(55,255,228,.9), 0 0 0 6px rgba(55,255,228,.18);
}

.sigil-meta-block{
  margin-top:24px;
  text-align:left;
  max-height:185px;
  overflow-y:auto;
  padding:12px 10px 12px 12px;

  color: var(--seal-text);
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
    radial-gradient(120% 160% at 8% -10%, rgba(55,255,228,.10), transparent 60%),
    radial-gradient(120% 160% at 92% 110%, rgba(167,139,250,.10), transparent 60%);
  border: 1px solid var(--seal-border);
  border-radius: 14px;
  box-shadow: 0 24px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.05);
  -webkit-backdrop-filter: blur(10px) saturate(145%);
  backdrop-filter: blur(10px) saturate(145%);
  -webkit-overflow-scrolling: touch;
  scrollbar-gutter: stable;

  /* soft top/bottom fade so scroll feels premium */
  -webkit-mask-image: linear-gradient(to bottom, transparent 0, #000 12px, #000 calc(100% - 12px), transparent 100%);
          mask-image: linear-gradient(to bottom, transparent 0, #000 12px, #000 calc(100% - 12px), transparent 100%);
}

.sigil-meta-block p{
  margin:6px 0;
  font-size:.93rem;
  color: var(--seal-text);
  text-shadow: 0 0 .45px rgba(255,255,255,.35), 0 6px 18px rgba(92,225,255,.18);
}

/* tasteful accent for keys/numbers if you use spans */
.sigil-meta-block .k{ color: var(--seal-text-dim); letter-spacing:.02em; }
.sigil-meta-block .v{ color: var(--seal-text); }
.sigil-meta-block .num{ color:#c7a6ff; }

/* Scrollbar polish (scoped) */
.sigil-meta-block{
  scrollbar-width: thin;
  scrollbar-color: rgba(92,225,255,.35) transparent;
}
.sigil-meta-block::-webkit-scrollbar{ width:10px; height:10px; }
.sigil-meta-block::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(55,255,228,.35), rgba(167,139,250,.35));
  border-radius:10px;
}
.sigil-meta-block::-webkit-scrollbar-track{ background: transparent; }

/* Copy buttons: glassy pills with ring/focus + “copied” flare */
.copy-btn{
  margin-left:6px;
  padding:6px 12px;
  font-size:.82rem;
  line-height:1;
  color: var(--seal-text);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 1px solid var(--seal-border);
  border-radius:10px;
  cursor:pointer;
  min-height: calc(var(--tap, 44px) * 0.7);
  transition: transform .14s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease, color .15s ease;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), 0 6px 18px rgba(0,0,0,.35);
  -webkit-tap-highlight-color: transparent;
}
.copy-btn:hover,
.copy-btn:focus-visible{
  transform: translateY(-1px);
  border-color: var(--seal-border-strong);
  box-shadow: var(--ring-shadow), 0 10px 26px rgba(55,255,228,.18);
  outline: none;
  color: #011614;
  background:
    radial-gradient(120% 160% at 0% 0%, rgba(55,255,228,.25), transparent 40%),
    linear-gradient(180deg, rgba(55,255,228,.18), rgba(55,255,228,.08));
}
.copy-btn.copied{
  border-color: var(--seal-border-strong);
  box-shadow: 0 0 0 2px rgba(55,255,228,.35), 0 0 0 8px rgba(55,255,228,.12);
}

/* ───── SLEEK MODE: ultra-compact CTAs (keeps 5.236s breath) ───── */

.btn-row{ margin-top:18px; gap:8px; }

/* Primary (save) — compact pill */
.save-btn{
  padding: 8px 14px;
  font-size: .88rem;
  letter-spacing: .3px;
  border-radius: 12px;
  min-height: 34px;

  box-shadow: 0 8px 18px rgba(55,255,228,.18), inset 0 1px 0 rgba(255,255,255,.22);
  animation: seal-breathe 5.236s ease-in-out infinite;
  transition: transform .14s ease, box-shadow .18s ease, filter .18s ease;
}
.save-btn:hover{ transform: translateY(-2px) scale(1.015); box-shadow: 0 12px 26px rgba(55,255,228,.24), inset 0 1px 0 rgba(255,255,255,.26); }
.save-btn:focus-visible{ outline:none; box-shadow: var(--focus), 0 10px 24px rgba(55,255,228,.2); }

/* Magenta rune — compact */
.stargate-btn{
  font:600 .80rem/1 "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  padding: .44rem 1rem;                /* ≈ 7px 16px */
  border-radius: 999px;                /* sleek pill */
  min-height: 34px;

  border: 1px solid rgba(255,0,255,.45);
  box-shadow: 0 8px 18px rgba(255,0,255,.18), inset 0 1px 0 rgba(255,255,255,.2);
  transition: transform .12s ease, box-shadow .18s ease, border-color .18s ease, filter .18s ease;
}
.stargate-btn:hover{
  transform: translateY(-2px);
  border-color:#ff40ff;
  box-shadow: 0 12px 26px rgba(255,64,255,.22), inset 0 1px 0 rgba(255,255,255,.24);
  filter: brightness(1.04);
}
.stargate-btn:active{
  transform: translateY(1px);
  border-color:#e300e3;
  box-shadow: 0 6px 16px rgba(227,0,227,.22), inset 0 1px 0 rgba(255,255,255,.18);
}
.stargate-btn:focus-visible{ outline:none; box-shadow: 0 0 0 2px rgba(255,0,255,.85), 0 0 0 6px rgba(255,0,255,.18); }

/* Keep tap targets humane on touch */
@media (pointer:coarse){
  .save-btn, .stargate-btn{ min-height: 40px; padding-block: .55rem; }
}

/* ╔═ REDUCED-MOTION SAFETY ═══════════════════════════════════════════════ */

@media (prefers-reduced-motion:reduce){
  .save-btn{ animation:none !important; }
  .copy-btn, .save-btn, .stargate-btn{ transition:none !important; }
}

/* ═════════════ Breath Selector – Divine Dropdown (kept look) ═══ */
select{
  background: linear-gradient(135deg, #1d1f20 0%, #292f33 100%);
  color:#f0f0f0; font-weight:600; font-size: 16px;
  padding: 10px 14px; border-radius:12px; border:1px solid #5a5a5a;
  box-shadow: 0 0 10px rgba(144,238,255,.3), 0 0 24px rgba(255,255,255,.08) inset;
  transition: box-shadow .18s ease, transform .12s ease, border-color .18s ease;
  appearance:none; position:relative; z-index:2; cursor:pointer;
  min-height: var(--tap);
  background-image: url("data:image/svg+xml,%3Csvg fill='white' height='24' width='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position: right 12px center; background-size:16px 16px; padding-right:36px;
  touch-action: manipulation;
}
select:hover{
  background: linear-gradient(135deg, #242729, #2e3336);
  box-shadow: 0 0 16px rgba(72,202,228,.6), 0 0 36px rgba(255,255,255,.1) inset;
  transform: translateY(-1px);
}
select:focus{ outline:none; border-color:#77f9e0; box-shadow:0 0 0 2px #00ffe0, 0 0 18px rgba(0,255,255,.6) }

.sigil-modal select{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  position:relative; z-index:2;
  background-color: rgba(10,10,20,.9);
  background-image:
    linear-gradient(145deg, rgba(66,255,194,.1), rgba(44,174,255,.08)),
    url("data:image/svg+xml,%3Csvg width='10' height='10' viewBox='0 0 12 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 2l4 4 4-4' stroke='%23A2F8FF' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 12px center; background-size:10px 10px;
  padding:10px 40px 10px 16px; border-radius:14px; border:1px solid rgba(162,248,255,.3);
  color:#A2F8FF; font-size:1rem; font-family:'Orbitron','Segoe UI',monospace; letter-spacing:.05em; text-transform:uppercase;
  box-shadow:0 0 6px rgba(162,248,255,.4), 0 0 18px rgba(44,174,255,.2), inset 0 0 6px rgba(162,248,255,.3);
  backdrop-filter: blur(10px);
  transition: transform .16s ease, box-shadow .2s ease, border-color .18s ease;
}
.sigil-modal select:hover,
.sigil-modal select:focus{
  background-color:#1a1a28;
  border-color:#A2F8FF; outline:none; transform: translateY(-1px) scale(1.02);
  box-shadow: 0 0 12px rgba(162,248,255,.7), 0 0 24px rgba(44,174,255,.4), inset 0 0 12px rgba(162,248,255,.4), 0 0 0 3px #8effe0, 0 0 20px rgba(142,255,224,.5);
}
.sigil-modal select.shimmer{
  background-image: linear-gradient(135deg, rgba(90,200,255,.05) 0%, rgba(90,200,255,.15) 50%, rgba(90,200,255,.05) 100%);
  background-size:400% 100%; animation: shimmer 2.5s linear infinite;
}
@keyframes shimmer{ from{background-position:-200% 0} to{background-position:200% 0} }
/* keep options readable on mobile (many UAs ignore styling anyway) */
.sigil-modal option{
  background-color:#10131a; color:#A2F8FF;
  padding:10px; font-size: clamp(.9rem, 3.5vw, 1rem);
  font-family:'Orbitron','Segoe UI',monospace; letter-spacing:.03em; text-transform:uppercase;
}
.sigil-modal option:hover{ background-color:#16222a; color:#C8FFFF }

/* remove native clear/expand artifacts */
select::-ms-clear,
select::-ms-expand,
select::-webkit-clear-button,
select::-webkit-inner-spin-button{ display:none; appearance:none }

/* Pulse-synced countdown (kept) */
.countdown{
  text-align:center;
  font-family:'Orbitron','Rajdhani','Monaco',sans-serif;
  font-size:1.25rem; margin-top:10px; color:#f2f2f2;
  text-shadow: 0 0 6px rgba(255,255,255,.35), 0 0 12px rgba(180,220,255,.40), 0 0 20px rgba(140,180,255,.60);
  animation: pulse-glow 5.236s infinite linear;
}
@keyframes pulse-glow{
  0%{   text-shadow:0 0 6px rgba(255,255,255,.30) }
  50%{  text-shadow:0 0 14px rgba(0,255,255,.80) }
  100%{ text-shadow:0 0 6px rgba(255,255,255,.30) }
}

/* “Now” flash feedback (kept) */
@keyframes flashNow{
  0%{ box-shadow:0 0 0 0 rgba(102,204,255,0) }
  40%{ box-shadow:0 0 18px 6px rgba(102,204,255,.55) }
  100%{ box-shadow:0 0 0 0 rgba(102,204,255,0) }
}
.sigil-modal.flash-now{ animation: flashNow .8s ease-out }

/* ╔═ Verifier FAB + Container (palette synced to SealMoment) ════
   Uses SealMoment colors when available:
   --seal-core (primary), --seal-aura (secondary), --seal-ink (text)
   Falls back to the original cyan/aqua + ink if not provided.
================================================================= */

/* ── Toggle FAB ──────────────────────────────────────────────── */
.verifier-toggle{
  all:unset;
  position:fixed;
  right:clamp(12px,4vw,20px);
  bottom:calc(clamp(12px,4vw,20px) + env(safe-area-inset-bottom));
  z-index:10001;
  cursor:pointer;

  display:inline-flex; align-items:center; gap:.5rem;
  padding:clamp(.48rem,1.6vw,.64rem) clamp(.78rem,2vw,1rem);
  min-height:40px; border-radius:999px;

  font:600 clamp(.82rem,1.8vw,.9rem)/1 var(--ff-ui, "JetBrains Mono", ui-monospace);
  letter-spacing:.02em; text-transform:uppercase;
  color:var(--seal-ink, #031316);

/* sleek micro-crystal finish (smaller, tighter highlights) */
background:
  /* base crystal core→aura */
  linear-gradient(
    135deg,
    color-mix(in srgb, var(--seal-core, var(--c-core, #00ffe0)) 90%, transparent),
    color-mix(in srgb, var(--seal-aura, var(--c-aura, #11d7ff)) 90%, transparent)
  ),
  /* compact glossy sweep */
  linear-gradient(
    to bottom,
    rgba(255,255,255,.22) 0 8%,
    rgba(255,255,255,.10) 12% 22%,
    transparent 38%
  ),
  /* small caustic glints */
  radial-gradient(60% 80% at 18% 0%,  rgba(255,255,255,.22) 0 7%, transparent 20%),
  radial-gradient(70% 90% at 82% 100%, rgba(255,255,255,.16) 0 6%, transparent 18%),
  /* subtle facets with narrow spread */
  conic-gradient(
    from 210deg at 68% 38%,
    color-mix(in srgb, var(--seal-core, #00ffe0) 24%, transparent) 0 10%,
    transparent 10% 30%,
    color-mix(in srgb, var(--seal-aura, #11d7ff) 18%, transparent) 30% 42%,
    transparent 42% 100%
  );
background-blend-mode: overlay, soft-light, screen, soft-light, color-dodge;
backdrop-filter: blur(6px) saturate(130%) contrast(104%) brightness(1.04);
-webkit-backdrop-filter: blur(6px) saturate(130%) contrast(104%) brightness(1.04);


  /* soft outer glow + inner glass highlight (palette-aware below) */
  box-shadow:
    0 10px 24px rgba(0,255,235,.28),
    inset 0 0 6px rgba(255,255,255,.12);

  transform-origin:100% 100%;
  transition: transform .22s cubic-bezier(.23,1.46,.45,1.1), box-shadow .22s ease, filter .22s ease;
  touch-action: manipulation;
  will-change: transform;

  /* focus ring color aligned with SealMoment secondary */
  --ring: color-mix(in srgb, var(--seal-aura, var(--c-aura, #11d7ff)) 60%, transparent);
}
.verifier-toggle::before{
  content:"";
  width:clamp(22px,5vw,26px); height:clamp(22px,5vw,26px); border-radius:50%;
  background:radial-gradient(circle, color-mix(in srgb, var(--seal-ink, #031316) 100%, transparent) 0 35%, transparent 60%);
  box-shadow:
    inset 0 0 10px rgba(0,0,0,.28),
    0 0 16px color-mix(in srgb, var(--seal-core, #00ffe0) 38%, transparent);
}
.verifier-toggle::after{
  --p: var(--kai-pulse, 5236ms);
  content:""; position:absolute; inset:-6px; border-radius:999px;
  border:1.5px solid color-mix(in srgb, var(--seal-core, #00ffe0) 35%, transparent);
  box-shadow:0 0 14px color-mix(in srgb, var(--seal-core, #00ffe0) 35%, transparent);
  opacity:.6; animation: verifier-ring var(--p) ease-out infinite; pointer-events:none;
  will-change: transform, opacity;
}
@keyframes verifier-ring{
  0%{ transform:scale(.94); opacity:.6 }
  70%{ transform:scale(1.12); opacity:.18 }
  100%{transform:scale(1.16); opacity:0 }
}
.verifier-toggle:hover,
.verifier-toggle:focus-visible{
  transform: translateY(-2px) scale(1.02);
  box-shadow:
    0 16px 36px color-mix(in srgb, var(--seal-core, #00ffe0) 42%, transparent),
    inset 0 0 10px rgba(255,255,255,.18);
  outline:2px solid var(--ring, rgba(0,255,235,.6)); outline-offset:3px;
}

/* ── Fullscreen container + bg ──────────────────────────────── */
.verifier-container{
  position:fixed; inset:0; z-index:10000;
  display:grid; grid-template-areas:"stack"; place-items:center;
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
           env(safe-area-inset-bottom) env(safe-area-inset-left);
}
.verifier-bg{
  grid-area:stack; position:absolute; inset:0; pointer-events:auto;
  background:
    /* base veil */
    linear-gradient(to bottom right,
      color-mix(in srgb, var(--seal-ink, #031316) 92%, transparent),
      color-mix(in srgb, var(--seal-ink, #031316) 96%, transparent)
    ),
    /* aurora 1 (core) */
    radial-gradient(circle at 20% 15%,
      color-mix(in srgb, var(--seal-core, #00ffe0) 12%, transparent) 0 8%, transparent 40%),
    /* aurora 2 (aura) */
    radial-gradient(circle at 80% 70%,
      color-mix(in srgb, var(--seal-aura, #11d7ff) 14%, transparent) 0 12%, transparent 45%),
    /* conic shimmer */
    conic-gradient(from 140deg at 50% 30%,
      color-mix(in srgb, var(--seal-core, #00ffe0) 10%, transparent),
      transparent 72deg);
  background-blend-mode: normal, screen, screen, normal;
  background-size:100% 100%, 1200px 1200px, 1600px 1600px, 100% 100%;
  animation: bg-star-drift 90s linear infinite, bg-aurora 28s ease-in-out infinite alternate;
  will-change: background-position;
  filter:saturate(110%);
}
@keyframes bg-star-drift{
  from{ background-position:0 0, 0 0, 0 0, center }
  to  { background-position:0 0, -240px 320px, 180px -260px, center }
}
@keyframes bg-aurora{ 0%{background-position-y:0%} 100%{background-position-y:120%} }

.verifier-container .container-shell{
  grid-area:stack; position:relative; width:100%; height:100%;
  display:grid; place-items:center; padding:clamp(8px,2.2vw,24px);
  background:radial-gradient(circle at 50% 40%,
    color-mix(in srgb, var(--seal-core, #00ffe0) 8%, transparent),
    transparent 60%);
  animation: container-fade .42s ease-out both;
}
@keyframes container-fade{ 0%{opacity:0; transform:translateY(12px) scale(.98)} 100%{opacity:1; transform:none} }

/* ── Exit button ────────────────────────────────────────────── */
.verifier-exit{
  all:unset; position:fixed;
  top:calc(16px + env(safe-area-inset-top));
  right:calc(16px + env(safe-area-inset-right));
  z-index:100020000;
  width:52px; height:52px; border-radius:50%;
  display:grid; place-items:center; cursor:pointer;

  font:800 1.35rem/1 var(--ff-ui, "JetBrains Mono", ui-monospace);
  color:var(--seal-ink, #031316);

  background:linear-gradient(
    135deg,
    var(--seal-core, var(--c-core, #00ffe0)),
    var(--seal-aura, var(--c-aura, #11d7ff))
  );
  box-shadow:
    0 18px 48px color-mix(in srgb, var(--seal-core, #00ffe0) 45%, transparent),
    inset 0 0 12px rgba(255,255,255,.22);
  transition: transform .22s cubic-bezier(.23,1.46,.45,1.1), box-shadow .22s ease, filter .22s ease;
  touch-action: manipulation;

  --ring: color-mix(in srgb, var(--seal-aura, var(--c-aura, #11d7ff)) 75%, transparent);
}
.verifier-exit::after{
  --p: var(--kai-pulse, 5236ms);
  content:""; position:absolute; inset:-8px; border-radius:inherit;
  border:2px solid color-mix(in srgb, var(--seal-core, #00ffe0) 45%, transparent);
  box-shadow:0 0 18px color-mix(in srgb, var(--seal-core, #00ffe0) 45%, transparent);
  animation: verifier-exit-ring var(--p) ease-out infinite; pointer-events:none;
  will-change: transform, opacity;
}
@keyframes verifier-exit-ring{
  0%{ transform:scale(.85); opacity:.9 }
  70%{ transform:scale(1.18); opacity:.25 }
  100%{transform:scale(1.24); opacity:0 }
}
.verifier-exit:hover,
.verifier-exit:focus-visible{
  transform: translateY(-3px) scale(1.05);
  box-shadow:
    0 26px 56px color-mix(in srgb, var(--seal-core, #00ffe0) 65%, transparent),
    inset 0 0 16px rgba(255,255,255,.26);
  outline:2px solid var(--ring, rgba(0,255,235,.75)); outline-offset:4px;
}

/* ── Notes:
   • Drop this in place of your current verifier CSS.
   • To perfectly “match SealMoment”, set these once (e.g., on :root):
       --seal-core: <SealMoment primary>;
       --seal-aura: <SealMoment secondary>;
       --seal-ink:  <SealMoment text>;
   • If you don’t set them, the original cyan/aqua/ink colors remain.
---------------------------------------------------------------- */


/* Small screens: tighter exit FAB */
@media (max-width:560px){
  .verifier-exit{
    width:46px; height:46px; font-size:1.2rem;
    top:calc(12px + env(safe-area-inset-top));
    right:calc(12px + env(safe-area-inset-right));
  }
}

/* High contrast / reduced motion for FABs */
@media (prefers-contrast:more){
  .verifier-toggle{ box-shadow:none; border:2px solid #00ffe0 }
  .verifier-toggle::after{ display:none }
  .verifier-exit{ box-shadow:none; border:2px solid #00ffe0; background:#00ffe0; color:#001316 }
  .verifier-exit::after{ display:none }
}
@media (prefers-reduced-motion:reduce){
  .verifier-toggle,
  .verifier-toggle::after,
  .verifier-bg,
  .verifier-container .container-shell,
  .verifier-exit, .verifier-exit::after{
    animation-duration:.01ms !important;
    animation-iteration-count:1 !important;
    transition:none !important;
  }
}
/* ────────────────────────────────────────────────────────────────
   Pulse-synced countdown line (for:
   {secsLeft !== null && <p class="countdown">next pulse in <strong>{secsLeft}</strong>s</p>}
   ──────────────────────────────────────────────────────────────── */

   .countdown{
    --p: var(--kai-pulse, 5236ms);
    --c: var(--chakra, #00ffe0);
  
    margin: 10px 0;
    display: inline-flex;
    align-items: baseline;
    gap: .35rem;
  
    font-family: 'Orbitron','Rajdhani','JetBrains Mono',ui-monospace,monospace;
    font-size: clamp(1rem, 2.6vw, 1.25rem);
    letter-spacing: .02em;
    color: #e9ffff;
    text-align: center;
  
    /* soft breathing glow in sync with Kai pulse */
    text-shadow:
      0 0 6px rgba(255,255,255,.28),
      0 0 12px rgba(160,220,255,.35),
      0 0 20px rgba(120,180,255,.55);
    animation: countdown-breathe var(--p) linear infinite;
  }
  
  .countdown strong{
    /* punchy number, tabular so it doesn't shift width */
    font-variant-numeric: tabular-nums;
    font-weight: 800;
    font-size: 1.15em;
    line-height: 1;
    color: #fff;
    letter-spacing: .01em;
  
    /* aqua core glow that tracks the active Ark hue if provided */
    text-shadow:
      0 0 10px color-mix(in oklab, var(--c), white 10%),
      0 0 18px color-mix(in oklab, var(--c), #8cfaff 10%),
      0 0 28px color-mix(in oklab, var(--c), #00f0ff 0%);
  
    /* tiny pop each render (kept subtle) */
    animation: tick-pop .18s cubic-bezier(.24,1.35,.45,1.05);
  }
  
  /* Optional: add class "imminent" when secsLeft <= 1 to flash warm */
  .countdown.imminent{
    color: #fff5f5;
    text-shadow:
      0 0 10px rgba(255,120,120,.65),
      0 0 24px rgba(255,80,80,.45),
      0 0 36px rgba(255,40,40,.35);
    animation: countdown-imminent .45s ease-in-out infinite;
  }
  .countdown.imminent strong{
    text-shadow:
      0 0 12px rgba(255,180,180,.95),
      0 0 26px rgba(255,120,120,.75),
      0 0 40px rgba(255,80,80,.55);
  }
  
  /* Keyframes */
  @keyframes countdown-breathe{
    0%   { text-shadow: 0 0 6px rgba(255,255,255,.28), 0 0 12px rgba(160,220,255,.35), 0 0 20px rgba(120,180,255,.55) }
    50%  { text-shadow: 0 0 10px color-mix(in oklab, var(--c), white 10%), 0 0 22px color-mix(in oklab, var(--c), #8cfaff 25%), 0 0 38px color-mix(in oklab, var(--c), #00f0ff 10%) }
    100% { text-shadow: 0 0 6px rgba(255,255,255,.28), 0 0 12px rgba(160,220,255,.35), 0 0 20px rgba(120,180,255,.55) }
  }
  @keyframes tick-pop{
    0%   { transform: translateY(.5px) scale(.96); filter: brightness(1); }
    100% { transform: none; filter: brightness(1.04); }
  }
  @keyframes countdown-imminent{
    0%,100% { transform: none; filter: saturate(110%); }
    50%     { transform: translateY(-1px) scale(1.02); filter: saturate(140%); }
  }
  
  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce){
    .countdown, .countdown strong{
      animation: none !important;
      text-shadow: 0 0 6px rgba(255,255,255,.28), 0 0 12px rgba(160,220,255,.35);
    }
  }
  /* ───────── Atlantean Gloss for the existing flat JSON block ───────── */

/* Text: crisp, luminous, still monospaced */
.rich-grid .json-altar pre.json,
.rich-grid .json-altar code.json,
.rich-grid .json-altar pre code {
  color: var(--ink);
  font-variant-numeric: tabular-nums;   /* cleaner number columns */
  text-shadow:
    0 0 0.45px rgba(255,255,255,.35),    /* micro-etch */
    0 6px 22px rgba(120,247,255,.18),    /* cyan aura */
    0 0 36px rgba(185,139,255,.16);      /* violet bloom */
}

/* Gorgeous glossy film over the JSON tablet */
.rich-grid .json-altar pre.json {
  position: relative;
  isolation: isolate;                    /* contain the shine */
}
.rich-grid .json-altar pre.json::before {
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,0) 38%), /* top gloss */
    radial-gradient(120% 160% at 12% -10%, rgba(120,247,255,.12), transparent 62%),
    radial-gradient(120% 160% at 88% 110%, rgba(185,139,255,.10), transparent 62%);
  mix-blend-mode: screen;
  z-index: 1;
}

/* Slow drifting inner light (very subtle) */
.rich-grid .json-altar pre.json::after {
  content: "";
  position: absolute; inset: -35%;
  pointer-events: none;
  border-radius: inherit;
  background:
    conic-gradient(from 0deg at 50% 50%,
      transparent 0 34%,
      rgba(120,247,255,.10) 42%,
      rgba(185,139,255,.10) 56%,
      transparent 64% 100%);
  filter: blur(26px);
  animation: altarDrift 22s linear infinite;
  opacity: .45;
  z-index: 0;
}
@keyframes altarDrift {
  from { transform: rotate(0deg) scale(1.02); }
  to   { transform: rotate(360deg) scale(1.02); }
}
@media (prefers-reduced-motion: reduce) {
  .rich-grid .json-altar pre.json::after { animation: none; opacity: .35; }
}

/* Row guide: faint horizontal strata to guide the eye */
.rich-grid .json-altar pre.json {
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.015)),
    repeating-linear-gradient(
      0deg,
      rgba(120,247,255,.05) 0,
      rgba(120,247,255,.05) 28px,
      transparent 28px,
      transparent 56px
    ),
    #0d1020;
}

/* Selection = Atlantean ink splash */
.rich-grid .json-altar pre.json::selection,
.rich-grid .json-altar code.json::selection {
  background: rgba(120,247,255,.28);
  color: #071018;
}

/* Scrollbar polish for the JSON pane only */
.rich-grid .json-altar pre.json {
  scrollbar-width: thin;
  scrollbar-color: rgba(120,247,255,.35) transparent;
}
.rich-grid .json-altar pre.json::-webkit-scrollbar { height: 10px; width: 10px; }
.rich-grid .json-altar pre.json::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(120,247,255,.35), rgba(185,139,255,.35));
  border-radius: 10px;
}
.rich-grid .json-altar pre.json::-webkit-scrollbar-track { background: transparent; }

/* Gentle focus ring when the block is keyboard-focused */
.rich-grid .json-altar pre.json:focus-visible {
  outline: 2px solid rgba(120,247,255,.45);
  outline-offset: 2px;
  box-shadow: 0 0 0 1px rgba(120,247,255,.25) inset, 0 12px 34px rgba(120,247,255,.18);
}
/* ───────── Breathing Holo Ink (5.236s) for RICH DATA summary ───────── */
/* Applies to: <details class="rich-data"><summary>RICH DATA …</summary>…> */

details.rich-data > summary {
  position: relative;
  will-change: transform, text-shadow, filter, background-position;
  transform-origin: center;

  /* same holographic ink as your titles */
  color: transparent;
  -webkit-text-fill-color: transparent;
  background:
    conic-gradient(from 180deg at 50% 50%,
      var(--accent), var(--accent-2), var(--accent-3), var(--accent)),
    radial-gradient(120% 180% at 10% 0%, rgba(120,247,255,.35), transparent 60%);
  -webkit-background-clip: text;
  background-clip: text;

  /* etched outline + aura */
  -webkit-text-stroke: 0.55px rgba(255,255,255,.28);
  text-shadow:
    0 0 0.5px rgba(255,255,255,.35),
    0 6px 22px rgba(120,247,255,.26);

  /* motion */
  background-size: 200% 200%;
  animation:
    holoBreath 5.236s ease-in-out infinite,   /* breathing scale/glow */
    holoShiftSlow 10.472s linear infinite;    /* gentle chroma drift */
}

/* keep the glossy bar behind the text */
details.rich-data > summary::before {
  content: "";
  position: absolute; inset: 0;
  z-index: -1;
  border-radius: var(--radius-lg);
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
    radial-gradient(120% 180% at 10% 0%, rgba(120,247,255,.10), transparent 60%);
  border: 1px solid var(--border);
  box-shadow:
    0 10px 28px rgba(0,0,0,.35),
    inset 0 0 0 1px rgba(255,255,255,.05);
  will-change: box-shadow, filter;
  animation: barHalo 5.236s ease-in-out infinite;
}

/* caret gets a tiny glow breath too */
details.rich-data > summary::after {
  animation: caretBreath 5.236s ease-in-out infinite;
  filter: drop-shadow(0 0 0 rgba(120,247,255,0));
}

/* Keyframes — Atlantean breath */
@keyframes holoBreath {
  0%, 100% {
    transform: translateZ(0) scale(1);
    text-shadow:
      0 0 0.45px rgba(255,255,255,.35),
      0 4px 16px rgba(120,247,255,.20),
      0 0 24px rgba(185,139,255,.14);
    letter-spacing: .06em;
    filter: brightness(1) saturate(1);
  }
  50% {
    transform: translateZ(0) scale(1.015);          /* gentle inhale */
    text-shadow:
      0 0 0.7px rgba(255,255,255,.5),
      0 10px 32px rgba(120,247,255,.38),
      0 0 54px rgba(185,139,255,.26);
    letter-spacing: .08em;
    filter: brightness(1.03) saturate(1.06);
  }
}

@keyframes barHalo {
  0%, 100% {
    box-shadow:
      0 10px 28px rgba(0,0,0,.35),
      inset 0 0 0 1px rgba(255,255,255,.05);
  }
  50% {
    box-shadow:
      0 18px 44px rgba(120,247,255,.24),
      inset 0 0 0 1px rgba(120,247,255,.22);
  }
}

@keyframes caretBreath {
  0%, 100% { filter: drop-shadow(0 0 0 rgba(120,247,255,0)); transform: translateY(0) rotate(45deg); }
  50%      { filter: drop-shadow(0 0 6px rgba(120,247,255,.45)); transform: translateY(-1px) rotate(45deg); }
}

/* subtle chroma drift across the conic gradient (very slow) */
@keyframes holoShiftSlow {
  0%   { background-position:   0% 50%; }
  100% { background-position: 200% 50%; }
}

/* Accessibility: honor reduced motion */
@media (prefers-reduced-motion: reduce) {
  details.rich-data > summary,
  details.rich-data > summary::before,
  details.rich-data > summary::after {
    animation: none !important;
  }
}
